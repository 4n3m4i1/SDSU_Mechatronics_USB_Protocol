file(GLOB USB_PROTOCOL_SOURCES 
    protocol/src/parser/usb_parse.c
    protocol/src/parser/usb_flags.c
    protocol/src/subtopics/system.c
    protocol/src/subtopics/power.c
    protocol/src/subtopics/motor.c
    protocol/src/actions/usb_actions.c
)

file(GLOB USB_PROTOCOL_HEADERS 
    protocol/include/mech_usb_protocol.h
    protocol/include/parser/usb_parse.h
    protocol/include/parser/usb_flags.h
    protocol/include/parser/msg_types.h
    protocol/include/subtopics/system.h
    protocol/include/subtopics/power.h
    protocol/include/subtopics/motor.h
    protocol/include/actions/usb_actions.h
    protocol/util/byte.h
)

include_directories(
    protocol/include
    protocol/include/parser
    protocol/include/subtopics
    protocol/include/actions
    protocol/util
)

add_library(usb_protocol STATIC ${USB_PROTOCOL_SOURCES} ${USB_PROTOCOL_HEADERS})
target_link_libraries(${PROJECT_NAME} usb_protocol)
